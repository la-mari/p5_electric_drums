<!DOCTYPE html>
<html>
<head>
	<title>Electric Drums</title>
	<script src="js/p5.js"></script>
	<script src="js/p5.sound.js"></script>
	<script src="js/p5.dom.js"></script>
</head>
<body>
<script type="text/javascript">
	var drumkitPath = "assets/Dubsounds-DR-55";
	var kick, snare, hat, rim;

	function preload(){
		kickSound = loadSound(drumkitPath + '/DR-55_KICK-02.wav');
		hatSound = loadSound(drumkitPath + '/DR-55_HAT-01.wav');
		rimSound = loadSound(drumkitPath + '/DR-55_RIM-01.wav');
		snareSound = loadSound(drumkitPath + '/DR-55_SNARE-01.wav')
	}

	function setup(){
		// createCanvas(windowWidth, windowHeight);
		createCanvas(400, 300);
		kick = new Drum("kick", kickSound, color('magenta'), 150, {x:250, y:225});
		hat = new Drum("hat", hatSound, color(255, 204, 0), 80, {x:100, y:200}); //yellow
		rim = new Drum("rim", rimSound, color(128, 229, 255), 80, {x:300, y:100}); //blue
		snare = new Drum("snare", snareSound, color(0, 230, 115), 100, {x:200, y:100}); //green
	}

	function draw(){
		background(64);
		//drumMachine();
		kick.display(); //displays drum
		hat.display(); 
		rim.display();
		snare.display();
		grid();

	}

	function grid(){ 
		for(var i = 0; i < width; i+=10){
			line(i, 0, i, height)
			for(var j = 0; j < height; j+=10){
				line(0, j, width, j);
			}
		}

	}

	var Drum = function(name, sound, colorize, size, pos){
		this.name = name;
		this.sound = sound;
		this.colorize = colorize;
		this.size = size;
		this.pos = pos;
	}

	Drum.prototype.play = function(){
		this.sound.play();
	}

	Drum.prototype.display = function(){
		push(); //start/save new drawing settings
		fill(this.colorize);
		ellipse(this.pos.x, this.pos.y, this.size, this.size); //kick
		pop(); //restore original settings
	}

	Drum.prototype.hit = function(){
		var result = dist(mouseX, mouseY, this.pos.x, this.pos.y) < this.size/2;
		return result;
	}

	function mousePressed(){
		if(kick.hit()){
			kick.play();

		}
		else if(hat.hit()){
			hat.play();
		}
		else if(rim.hit()){
			rim.play();
		}
		else if(snare.hit()){
			snare.play();
		}
	}
</script>
</body>

</html>